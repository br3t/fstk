<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="utf-8" />
	<title>Продвинутый JavaScript 2. ООП@ Курс Frontend-разработки</title>
	<link rel="stylesheet" type="text/css" href="../../css/style.css" />
</head>
<body>
	<h1>Продвинутый JavaScript 2. Объектно-ориентированное программирование</h1>
	<p>ООП &mdash; это не просто описание сущностей в виде объектов и их использование. Это создание архитектуры всего приложения, с описанием взаимодействия разных частей друг с другом.</p>

	<h2>Класс</h2>
	<p>Описывая функцию-конструктор мы практически создали <b>класс</b>:</p>
	<code class="listing"><span class="key">function</span> <span class="name">Connection</span>() {<br />
&nbsp; &nbsp; this.isOpened = <span class="var">false</span>;<br />
&nbsp; &nbsp; this.isPermanent = <span class="var">false</span>;<br />
&nbsp; &nbsp; this.toggleState = <span class="key">function</span>(newState) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; this.isOpened = newState;<br />
&nbsp; &nbsp; }<br />
}<br />
<span class="key">var</span> myConnection = <span class="key">new</span> Connection;</code>
	<p>Про подобные классы говорят, что они созданы в <b>функциональном стиле</b>.</p>
	<p>Класс &mdash; это шаблон кода, позволяющий создавать однотипные объекты.</p>

	<h2>Внутренний и внешний интерфейс (инкапсуляция)</h2>
	<p>В объектно-ориентированном программировании различают:</p>
	<ul>
		<li><b>Внутренний интерфейс</b> &mdash; это совокупность свойств и методов, доступ к которым может быть осуществлен только из других методов объекта, их также называют «приватными»</li>
		<li><b>Внешний интерфейс</b> &mdash; это совокупность свойств и методов, доступных из любово места программы, их называют «публичными»</li>
	</ul>
	<p>Приватные свойства/методы класса реализуются с помощью локальных переменных внутри функции конструктора. Публичные свойства/методы &mdash; это те, что добавлены в <b>this</b>.</p>

	<h2>Геттеры и сеттеры</h2>
	<p>Для большинства публичных свойств могут быть ограничения: по типу значения, по абсолютному значению (для числовых свойств) и так далее. В силу того, что свойства публичные, нет никакого контроля над там, чтобы значения таких свойст задавались с учетом ограничений. Потому для обеспечения такого контроля свойства делаются приватными и для каждого свойства задается пара публичных методов для установки и считывания значения таких свойств.</p>
	<p>В нашем классе соединение можно перебросить на любой порт в любой точке программы.</p>
	<code class="listing"><span class="key">function</span> <span class="name">Connection</span>(port) {<br />
&nbsp; &nbsp; this.port = port;<br />
}<br />
<span class="key">var</span> myConnection = <span class="key">new</span> Connection(80);<br />
...<br />
myConnection.port = <span class="key">666</span>; <span class="comment">// перебросили порт "вручную"</span></code>
	<p>Но соединение на таком порту может не поддерживаться нашим <b>Connection</b>, потому следует добавить сеттер для корректной установки порта.</p>
	<code class="listing"><span class="key">function</span> <span class="name">Connection</span>(port) {<br />
&nbsp; &nbsp; <span class="comment">// port в LE конструктора</span><br />
&nbsp; &nbsp; this.setPort = <span class="key">function</span>(newPort) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; if([80,81,20,21].indexOf(newPort) == -1) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="var">throw new</span> Error(<span class="string">"Choose correct port number!"</span>);<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="var">return</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp; &nbsp; &nbsp; &nbsp; this.port = newPort;<br />
&nbsp; &nbsp; }<br />
}<br />
<span class="key">var</span> myConnection = <span class="key">new</span> Connection(80);<br />
...<br />
myConnection.setPort(81); <span class="comment">// проверили и поменяли, всё ок</span><br />
myConnection.setPort(666); <span class="comment">// Ошибка</span></code>
	<p>Чтобы получать значение приватного свойства нужно добавить метод-геттер.</p>

	<h2>Функциональное наследование</h2>
	<p></p>

	<h2>Защищённые свойства</h2>
	<p></p>

	<h2>Переопределение методов (полиморфизм)</h2>
	<p></p>
</h2>

</body>
</html>



